<!DOCTYPE html><html lang="pt-BR"><head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Gerenciador de Sistemas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#2563eb"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="default"/>
    <meta name="apple-mobile-web-app-title" content="Gerenciador"/>
    <link rel="apple-touch-icon" href="data:image/svg+xml,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; viewBox=&#39;0 0 100 100&#39;&gt;&lt;text y=&#39;.9em&#39; font-size=&#39;90&#39;&gt;⚙️&lt;/text&gt;&lt;/svg&gt;"/>
    
    <!-- Meta Tags para SEO -->
    <meta name="description" content="Sistema completo de gerenciamento com autenticação e ferramentas avançadas"/>
    <meta property="og:title" content="Gerenciador de Sistemas"/>
    <meta property="og:description" content="Sistema completo de gerenciamento com autenticação e ferramentas avançadas"/>
    <meta property="og:type" content="website"/>
    <meta property="og:site_name" content="OnSpace.AI"/>
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:title" content="Gerenciador de Sistemas"/>
    <meta name="twitter:description" content="Sistema completo de gerenciamento com autenticação e ferramentas avançadas"/>
    
    <link rel="stylesheet" href="style.css"/>
</head>
<body class="bg-gray-50 min-h-screen otimizado-mobile">
    <!-- Tela de Login -->
    <div id="tela-login" class="min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-blue-500 to-purple-600">
        <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md aparecer-suave">
            <div class="text-center mb-8">
                <div class="mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4">
                    <i class="fas fa-cogs text-2xl text-blue-600"></i>
                </div>
                <h1 class="text-2xl font-bold text-gray-800">Gerenciador de Sistemas</h1>
                <p class="text-gray-600 mt-2">Faça login para acessar o sistema</p>
            </div>
            
            <form id="formulario-login" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Usuário</label>
                    <input type="text" id="nome-usuario" required="" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Digite seu usuário"/>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Senha</label>
                    <div class="relative">
                        <input type="password" id="senha-usuario" required="" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-12" placeholder="Digite sua senha"/>
                        <button type="button" onclick="alternarVisibilidadeSenhaLogin()" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700">
                            <i class="fas fa-eye" id="olho-senha-login"></i>
                        </button>
                    </div>
                </div>
                
                <div class="flex items-center justify-between">
                    <label class="flex items-center">
                        <input type="checkbox" id="lembrar-me" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500"/>
                        <span class="ml-2 text-sm text-gray-600">Lembrar-me</span>
                    </label>
                    <!--Botao Criar conta-->   
                   <!--  <a href="#" class="text-sm text-blue-600 hover:text-blue-800" onclick="mostrarFormularioCadastro()">Criar conta</a>-->
                </div>
                
                <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition duration-200 font-medium">
                    <span id="texto-botao-login">Entrar</span>
                </button>
            </form>
            
            <!-- Credenciais padrão (para demonstração) 
            <div class="mt-6 p-4 bg-gray-50 rounded-lg text-sm">
                <p class="font-medium text-gray-800 mb-2">Credenciais padrão:</p>
                <p class="text-gray-600">Usuário: <span class="font-mono">admin</span></p>
                <p class="text-gray-600">Senha: <span class="font-mono">admin123</span></p>
            </div>-->
        </div>
    </div>
    
    <!-- Tela de Cadastro -->
    <div id="tela-cadastro" class="min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-purple-500 to-pink-600 hidden">
        <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md aparecer-suave">
            <div class="text-center mb-8">
                <div class="mx-auto w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mb-4">
                    <i class="fas fa-user-plus text-2xl text-purple-600"></i>
                </div>
                <h1 class="text-2xl font-bold text-gray-800">Criar Conta</h1>
                <p class="text-gray-600 mt-2">Cadastre-se no sistema</p>
            </div>
            
            <form id="formulario-cadastro" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Nome Completo</label>
                    <input type="text" id="nome-completo-cad" required="" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" placeholder="Digite seu nome completo"/>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Usuário</label>
                    <input type="text" id="nome-usuario-cad" required="" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" placeholder="Escolha um nome de usuário"/>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Senha</label>
                    <div class="relative">
                        <input type="password" id="senha-cad" required="" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent pr-12" placeholder="Digite sua senha"/>
                        <button type="button" onclick="alternarVisibilidadeSenhaCadastro()" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700">
                            <i class="fas fa-eye" id="olho-senha-cadastro"></i>
                        </button>
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Confirmar Senha</label>
                    <input type="password" id="confirmar-senha-cad" required="" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" placeholder="Confirme sua senha"/>
                </div>
                <!---->
                <button type="submit" class="w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition duration-200 font-medium">
                    <span id="texto-botao-cadastro">Cadastrar</span>
                </button>
            </form>
            
            <div class="mt-6 text-center">
                <p class="text-sm text-gray-600">
                    Já tem conta? 
                    <button onclick="mostrarFormularioLogin()" class="text-purple-600 hover:text-purple-800 font-medium">Faça login</button>
                </p>
            </div>
        </div>
    </div>
    
    <!-- Aplicação Principal -->
    <div id="aplicacao-principal" class="hidden">
        <!-- Header -->
        <header class="bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 shadow-lg sticky top-0 z-40">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-lg md:text-xl font-bold">
                        <i class="fas fa-cogs mr-2"></i>
                        Gerenciador de Sistemas
                    </h1>
                    <div class="text-xs md:text-sm mt-1">
                        <span class="status-conexao" id="indicador-conexao"></span>
                        <span id="texto-status-conexao">Sistema carregado</span>
                    </div>
                </div>
                <div class="flex items-center space-x-2">
                    <button onclick="alternarVisibilidadeCardSenhas()" class="bg-blue-500 hover:bg-blue-600 px-3 py-1 rounded text-sm transition duration-200" title="Mostrar/Ocultar Senhas">
                        <i class="fas fa-eye" id="icone-toggle-senhas"></i>
                    </button>
                    <span class="text-sm hidden md:inline">Olá, <span id="nome-usuario-logado">Usuário</span></span>
                    <button onclick="logout()" class="bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-sm transition duration-200">
                        <i class="fas fa-sign-out-alt mr-1"></i>
                        <span class="hidden md:inline">Sair</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="container mx-auto p-4 pb-20 max-w-7xl">
            <!-- Sistema Info Card -->
            <div class="bg-white rounded-xl shadow-lg p-4 md:p-6 mb-6 aparecer-suave">
                <h2 class="text-lg md:text-xl font-semibold mb-4 text-gray-800 flex items-center">
                    <i class="fas fa-info-circle mr-2 text-blue-600"></i>
                    Informações do Sistema
                </h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4" id="grade-informacoes-sistema">
                    <!-- Informações serão carregadas dinamicamente -->
                </div>
            </div>

            <!-- Senhas Card -->
            <div id="card-senhas" class="bg-white rounded-xl shadow-lg p-4 md:p-6 mb-6 aparecer-suave card-senhas">
                <div class="flex justify-between items-center mb-4 cursor-pointer" onclick="alternarVisibilidadeCardSenhas()">
                    <h2 class="text-lg md:text-xl font-semibold text-gray-800 flex items-center">
                        <i class="fas fa-key mr-2 text-green-600"></i>
                        Senhas do Sistema
                    </h2>
                    <i class="fas fa-eye text-gray-500" id="icone-card-senhas"></i>
                </div>
                <div class="conteudo-senhas">
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4" id="grade-senhas">
                        <!-- Senhas serão carregadas dinamicamente -->
                    </div>
                </div>
            </div>

            <!-- Tab Navigation -->
            <div class="bg-white rounded-xl shadow-lg mb-6 aparecer-suave">
                <div class="flex flex-wrap border-b overflow-x-auto">
                    <button onclick="abrirAba(event, &#39;aba-menus&#39;)" class="botao-aba px-4 py-3 border-b-2 border-blue-600 text-blue-600 font-medium whitespace-nowrap" data-permissao="menus">
                        <i class="fas fa-list mr-2"></i>Menus
                    </button>
                    <button onclick="abrirAba(event, &#39;aba-xml&#39;)" class="botao-aba px-4 py-3 border-b-2 border-transparent text-gray-600 hover:text-blue-600 whitespace-nowrap" data-permissao="xml">
                        <i class="fas fa-file-code mr-2"></i>Validar XML
                    </button>
                    <button onclick="abrirAba(event, &#39;aba-anotacoes&#39;)" class="botao-aba px-4 py-3 border-b-2 border-transparent text-gray-600 hover:text-blue-600 whitespace-nowrap" data-permissao="anotacoes">
                        <i class="fas fa-sticky-note mr-2"></i>Anotações
                    </button>
                    <button onclick="abrirAba(event, &#39;aba-sql&#39;)" class="botao-aba px-4 py-3 border-b-2 border-transparent text-gray-600 hover:text-blue-600 whitespace-nowrap" data-permissao="sql">
                        <i class="fas fa-database mr-2"></i>Consultas SQL
                    </button>
                    <button onclick="abrirAba(event, &#39;aba-usuarios&#39;)" class="botao-aba px-4 py-3 border-b-2 border-transparent text-gray-600 hover:text-blue-600 whitespace-nowrap apenas-admin" data-permissao="usuarios">
                        <i class="fas fa-users mr-2"></i>Usuários
                    </button>
                    <button onclick="abrirAba(event, &#39;aba-atendimento&#39;)" class="botao-aba px-4 py-3 border-b-2 border-transparent text-gray-600 hover:text-blue-600 whitespace-nowrap" data-permissao="atendimento">
                        <i class="fas fa-headset mr-2"></i>Atendimento Externo
                    </button>
                    <button onclick="abrirAba(event, &#39;aba-agenda&#39;)" class="botao-aba px-4 py-3 border-b-2 border-transparent text-gray-600 hover:text-blue-600 whitespace-nowrap" data-permissao="agenda">
                        <i class="fas fa-calendar-alt mr-2"></i>Minha Agenda
                    </button>
                    <button onclick="abrirAba(event, &#39;aba-admin-agenda&#39;)" class="botao-aba px-4 py-3 border-b-2 border-transparent text-gray-600 hover:text-blue-600 whitespace-nowrap apenas-admin" data-permissao="admin_agenda">
                        <i class="fas fa-users-cog mr-2"></i>Gestão de Agenda
                    </button>
                </div>

                <!-- Tab Contents -->
                <div id="aba-menus" class="conteudo-aba ativo p-4 md:p-6">
                    <h3 class="text-lg font-semibold mb-4">Gerenciar Menus</h3>
                    <div class="mb-4">
                        <div class="flex flex-col md:flex-row gap-2 mb-2">
                            <input type="text" id="nome-menu" placeholder="Nome do menu" class="flex-1 p-3 border rounded-lg"/>
                            <input type="text" id="texto-menu" placeholder="Texto do menu" class="flex-1 p-3 border rounded-lg"/>
                            <button onclick="adicionarMenu()" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition duration-200">
                                <i class="fas fa-plus mr-2"></i>Adicionar
                            </button>
                        </div>
                    </div>
                    <div id="lista-menus" class="space-y-2">
                        <!-- Menus adicionados aparecerão aqui -->
                    </div>
                </div>

                <div id="aba-xml" class="conteudo-aba p-4 md:p-6">
                    <h3 class="text-lg font-semibold mb-4">Validar XML na SEFAZ-RS</h3>
                    <div class="mb-4">
                        <textarea id="conteudo-xml" placeholder="Cole o conteúdo do XML aqui..." class="w-full h-40 p-3 border rounded-lg font-mono text-sm"></textarea>
                    </div>
                    <div class="flex flex-col sm:flex-row gap-2 mb-4">
                        <button onclick="validarXML()" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition duration-200">
                            <i class="fas fa-check-circle mr-2"></i>Validar XML
                        </button>
                        <button onclick="formatarXML()" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition duration-200">
                            <i class="fas fa-code mr-2"></i>Formatar XML
                        </button>
                    </div>
                    <div id="resultado-xml" class="mt-4 hidden"></div>
                </div>

                <div id="aba-anotacoes" class="conteudo-aba p-4 md:p-6">
                    <h3 class="text-lg font-semibold mb-4">Anotações</h3>
                    <div class="mb-4">
                        <div class="flex flex-col md:flex-row gap-2 mb-2">
                            <input type="text" id="titulo-anotacao" placeholder="Título da anotação" class="flex-1 p-3 border rounded-lg"/>
                            <button onclick="salvarAnotacao()" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition duration-200">
                                <i class="fas fa-save mr-2"></i>Salvar
                            </button>
                        </div>
                        <textarea id="area-anotacoes" placeholder="Digite suas anotações aqui..." class="w-full h-40 p-3 border rounded-lg"></textarea>
                    </div>
                    <div id="lista-anotacoes" class="space-y-2">
                        <!-- Anotações salvas aparecerão aqui -->
                    </div>
                </div>

                <div id="aba-sql" class="conteudo-aba p-4 md:p-6">
                    <h3 class="text-lg font-semibold mb-4">Consultas SQL Salvas</h3>
                    <div class="mb-4">
                        <div class="flex flex-col md:flex-row gap-2 mb-2">
                            <input type="text" id="nome-consulta" placeholder="Nome da consulta" class="flex-1 p-3 border rounded-lg"/>
                            <button onclick="salvarConsulta()" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition duration-200">
                                <i class="fas fa-save mr-2"></i>Salvar
                            </button>
                        </div>
                        <textarea id="consulta-sql" placeholder="Digite sua consulta SQL aqui..." class="w-full h-32 p-3 border rounded-lg font-mono text-sm"></textarea>
                    </div>
                    <div id="consultas-salvas" class="space-y-2">
                        <!-- Consultas salvas aparecerão aqui -->
                    </div>
                </div>

                <!-- Tab Usuários (Admin Only) -->
                <div id="aba-usuarios" class="conteudo-aba p-4 md:p-6">
                    <h3 class="text-lg font-semibold mb-4">Gerenciar Usuários</h3>
                    <div class="bg-gray-50 p-4 rounded-lg mb-6">
                        <h4 class="font-medium mb-4">Criar Novo Usuário</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <input type="text" id="novo-nome-usuario" placeholder="Nome completo" class="p-3 border rounded-lg"/>
                            <input type="text" id="novo-nome-login" placeholder="Nome de usuário" class="p-3 border rounded-lg"/>
                            <input type="password" id="nova-senha-usuario" placeholder="Senha" class="p-3 border rounded-lg"/>
                            <select id="novo-papel-usuario" class="p-3 border rounded-lg">
                                <option value="usuario">Usuário</option>
                                <option value="admin">Administrador</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <h5 class="font-medium mb-2">Permissões:</h5>
                            <div class="grid grid-cols-2 md:grid-cols-3 gap-2">
                                <label class="flex items-center">
                                    <input type="checkbox" id="perm-menus" class="mr-2" checked=""/>
                                    <span class="text-sm">Gerenciar Menus</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="perm-xml" class="mr-2" checked=""/>
                                    <span class="text-sm">Validar XML</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="perm-anotacoes" class="mr-2" checked=""/>
                                    <span class="text-sm">Anotações</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="perm-sql" class="mr-2" checked=""/>
                                    <span class="text-sm">Consultas SQL</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="perm-banco-dados" class="mr-2" checked=""/>
                                    <span class="text-sm">Banco de Dados</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="perm-downloads" class="mr-2" checked=""/>
                                    <span class="text-sm">Downloads</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="perm-sites" class="mr-2" checked=""/>
                                    <span class="text-sm">Sites Úteis</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="perm-atendimento" class="mr-2" checked=""/>
                                    <span class="text-sm">Atendimento</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="perm-agenda" class="mr-2" checked=""/>
                                    <span class="text-sm">Agenda</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="perm-admin-agenda" class="mr-2"/>
                                    <span class="text-sm">Admin Agenda</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="perm-usuarios" class="mr-2"/>
                                    <span class="text-sm">Usuários</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="perm-conhecimento" class="mr-2" checked=""/>
                                    <span class="text-sm">Base Conhecimento</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="perm-atendimentos-registros" class="mr-2" checked=""/>
                                    <span class="text-sm">Registros Atendimento</span>
                                </label>
                            </div>
                        </div>
                        <button onclick="criarUsuario()" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition duration-200">
                            <i class="fas fa-user-plus mr-2"></i>Criar Usuário
                        </button>
                    </div>
                    <div id="lista-usuarios" class="space-y-2">
                        <!-- Lista de usuários aparecerá aqui -->
                    </div>
                </div>

                <!-- Tab Atendimento Externo -->
                <div id="aba-atendimento" class="conteudo-aba p-4 md:p-6">
                    <div class="grid grid-cols-1 xl:grid-cols-2 gap-6">
                        <!-- Anotações de Atendimento -->
                        <div class="bg-white border rounded-lg p-4">
                            <h3 class="text-lg font-semibold mb-4">Anotações de Atendimento</h3>
                            <div class="space-y-4 mb-4">
                                <input type="text" id="cnpj-cliente" placeholder="CNPJ do Cliente" class="w-full p-3 border rounded-lg mascara-cnpj" maxlength="18"/>
                                <input type="text" id="titulo-atendimento" placeholder="Título do atendimento" class="w-full p-3 border rounded-lg"/>
                                <textarea id="anotacoes-atendimento" placeholder="Anotações do atendimento..." class="w-full h-32 p-3 border rounded-lg"></textarea>
                                <button onclick="salvarAnotacaoAtendimento()" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition duration-200">
                                    <i class="fas fa-save mr-2"></i>Salvar Atendimento
                                </button>
                            </div>
                            <div id="lista-anotacoes-atendimento" class="space-y-2 max-h-96 overflow-y-auto">
                                <!-- Anotações de atendimento aparecerão aqui -->
                            </div>
                        </div>

                        <!-- Sistema de Tarefas To-Do -->
                        <div class="bg-white border rounded-lg p-4">
                            <h3 class="text-lg font-semibold mb-4">Tarefas (To-Do)</h3>
                            <div class="mb-4">
                                <div class="flex flex-col gap-2 mb-2">
                                    <input type="text" id="titulo-tarefa" placeholder="Título da tarefa" class="w-full p-3 border rounded-lg"/>
                                    <textarea id="descricao-tarefa" placeholder="Descrição da tarefa..." class="w-full h-20 p-3 border rounded-lg"></textarea>
                                    <input type="file" id="arquivos-tarefa" multiple="" accept="image/*,*/*" class="w-full p-2 border rounded-lg"/>
                                    <button onclick="criarTarefa()" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition duration-200">
                                        <i class="fas fa-plus mr-2"></i>Criar Tarefa
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Kanban Board -->
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3">
                                    <h4 class="font-medium text-yellow-800 mb-3 text-center">
                                        <i class="fas fa-clock mr-2"></i>A Fazer
                                    </h4>
                                    <div id="coluna-fazendo" class="space-y-2 min-h-32" ondrop="soltar(event)" ondragover="permitirSoltar(event)" data-status="fazendo">
                                        <!-- Tarefas "A Fazer" aparecerão aqui -->
                                    </div>
                                </div>
                                
                                <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
                                    <h4 class="font-medium text-blue-800 mb-3 text-center">
                                        <i class="fas fa-play mr-2"></i>Em Andamento
                                    </h4>
                                    <div id="coluna-progresso" class="space-y-2 min-h-32" ondrop="soltar(event)" ondragover="permitirSoltar(event)" data-status="progresso">
                                        <!-- Tarefas "Em Andamento" aparecerão aqui -->
                                    </div>
                                </div>
                                
                                <div class="bg-green-50 border border-green-200 rounded-lg p-3">
                                    <h4 class="font-medium text-green-800 mb-3 text-center">
                                        <i class="fas fa-check mr-2"></i>Concluído
                                    </h4>
                                    <div id="coluna-concluido" class="space-y-2 min-h-32" ondrop="soltar(event)" ondragover="permitirSoltar(event)" data-status="concluido">
                                        <!-- Tarefas "Concluído" aparecerão aqui -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab Minha Agenda -->
                <div id="aba-agenda" class="conteudo-aba p-4 md:p-6">
                    <div class="grid grid-cols-1 xl:grid-cols-2 gap-6">
                        <!-- Minhas Tarefas da Agenda -->
                        <div class="bg-white border rounded-lg p-4">
                            <h3 class="text-lg font-semibold mb-4 flex items-center">
                                <i class="fas fa-tasks mr-2 text-blue-600"></i>
                                Minhas Tarefas
                            </h3>
                            <div class="space-y-4 mb-4">
                                <input type="text" id="titulo-tarefa-pessoal" placeholder="Título da tarefa" class="w-full p-3 border rounded-lg"/>
                                <textarea id="descricao-tarefa-pessoal" placeholder="Descrição da tarefa..." class="w-full h-24 p-3 border rounded-lg"></textarea>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                                    <input type="date" id="data-tarefa-pessoal" class="w-full p-3 border rounded-lg"/>
                                    <input type="time" id="hora-tarefa-pessoal" class="w-full p-3 border rounded-lg"/>
                                </div>
                                <select id="prioridade-tarefa-pessoal" class="w-full p-3 border rounded-lg">
                                    <option value="baixa">Prioridade Baixa</option>
                                    <option value="media" selected="">Prioridade Média</option>
                                    <option value="alta">Prioridade Alta</option>
                                    <option value="urgente">Urgente</option>
                                </select>
                                <button onclick="adicionarTarefaPessoal()" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition duration-200 w-full">
                                    <i class="fas fa-plus mr-2"></i>Adicionar à Agenda
                                </button>
                            </div>
                            
                            <!-- Lista de Tarefas Pessoais -->
                            <div id="lista-tarefas-pessoais" class="space-y-2 max-h-96 overflow-y-auto">
                                <!-- Tarefas pessoais aparecerão aqui -->
                            </div>
                        </div>

                        <!-- Minha Escala de Trabalho -->
                        <div class="bg-white border rounded-lg p-4">
                            <h3 class="text-lg font-semibold mb-4 flex items-center">
                                <i class="fas fa-clock mr-2 text-green-600"></i>
                                Minha Escala de Trabalho
                            </h3>
                            
                            <!-- Configurar Horário Padrão -->
                            <div class="bg-gray-50 p-4 rounded-lg mb-4">
                                <h4 class="font-medium mb-3">Configurar Horário Padrão</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Entrada:</label>
                                        <input type="time" id="horario-entrada-padrao" class="w-full p-2 border rounded-lg" value="08:00"/>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Saída:</label>
                                        <input type="time" id="horario-saida-padrao" class="w-full p-2 border rounded-lg" value="17:00"/>
                                    </div>
                                </div>
                                <button onclick="salvarEscalaPadrao()" class="mt-3 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition duration-200">
                                    <i class="fas fa-save mr-2"></i>Salvar Padrão
                                </button>
                            </div>

                            <!-- Adicionar Escala Específica -->
                            <div class="space-y-3 mb-4">
                                <input type="date" id="data-escala" class="w-full p-3 border rounded-lg"/>
                                <div class="grid grid-cols-2 gap-2">
                                    <input type="time" id="inicio-escala" class="w-full p-3 border rounded-lg" placeholder="Entrada"/>
                                    <input type="time" id="fim-escala" class="w-full p-3 border rounded-lg" placeholder="Saída"/>
                                </div>
                                <input type="text" id="observacoes-escala" placeholder="Observações (opcional)" class="w-full p-3 border rounded-lg"/>
                                <button onclick="adicionarEntradaEscala()" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition duration-200 w-full">
                                    <i class="fas fa-calendar-plus mr-2"></i>Adicionar à Escala
                                </button>
                            </div>

                            <!-- Visualização da Escala -->
                            <div id="lista-escala-pessoal" class="space-y-2 max-h-64 overflow-y-auto">
                                <!-- Escala pessoal aparecerá aqui -->
                            </div>
                        </div>
                    </div>

                    <!-- Calendário Visual (Resumido) -->
                    <div class="bg-white border rounded-lg p-4 mt-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="fas fa-calendar mr-2 text-purple-600"></i>
                            Visão Mensal - <span id="mes-ano-calendario"></span>
                        </h3>
                        <div class="flex justify-between items-center mb-4">
                            <button onclick="mudarMes(-1)" class="bg-gray-200 text-gray-700 px-3 py-1 rounded hover:bg-gray-300">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button onclick="irParaHoje()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                                Hoje
                            </button>
                            <button onclick="mudarMes(1)" class="bg-gray-200 text-gray-700 px-3 py-1 rounded hover:bg-gray-300">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                        <div id="grade-calendario" class="grid grid-cols-7 gap-1 text-center">
                            <!-- Calendário será gerado dinamicamente -->
                        </div>
                    </div>
                </div>

                <!-- Tab Gestão de Agenda (Admin Only) -->
                <div id="aba-admin-agenda" class="conteudo-aba p-4 md:p-6">
                    <div class="grid grid-cols-1 xl:grid-cols-2 gap-6">
                        <!-- Atribuir Tarefas aos Usuários -->
                        <div class="bg-white border rounded-lg p-4">
                            <h3 class="text-lg font-semibold mb-4 flex items-center">
                                <i class="fas fa-user-plus mr-2 text-red-600"></i>
                                Atribuir Tarefas aos Usuários
                            </h3>
                            <div class="space-y-4 mb-4">
                                <select id="select-usuario-atribuir" class="w-full p-3 border rounded-lg">
                                    <option value="">Selecionar usuário...</option>
                                </select>
                                <input type="text" id="titulo-tarefa-atribuir" placeholder="Título da tarefa" class="w-full p-3 border rounded-lg"/>
                                <textarea id="descricao-tarefa-atribuir" placeholder="Descrição da tarefa..." class="w-full h-24 p-3 border rounded-lg"></textarea>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                                    <input type="date" id="data-tarefa-atribuir" class="w-full p-3 border rounded-lg"/>
                                    <input type="time" id="hora-tarefa-atribuir" class="w-full p-3 border rounded-lg"/>
                                </div>
                                <select id="prioridade-tarefa-atribuir" class="w-full p-3 border rounded-lg">
                                    <option value="baixa">Prioridade Baixa</option>
                                    <option value="media" selected="">Prioridade Média</option>
                                    <option value="alta">Prioridade Alta</option>
                                    <option value="urgente">Urgente</option>
                                </select>
                                <button onclick="atribuirTarefaAoUsuario()" class="bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition duration-200 w-full">
                                    <i class="fas fa-paper-plane mr-2"></i>Atribuir Tarefa
                                </button>
                            </div>
                        </div>

                        <!-- Gerenciar Escalas dos Usuários -->
                        <div class="bg-white border rounded-lg p-4">
                            <h3 class="text-lg font-semibold mb-4 flex items-center">
                                <i class="fas fa-users-cog mr-2 text-purple-600"></i>
                                Gerenciar Escalas
                            </h3>
                            <div class="space-y-4 mb-4">
                                <select id="select-usuario-escala" class="w-full p-3 border rounded-lg">
                                    <option value="">Selecionar usuário...</option>
                                </select>
                                <input type="date" id="data-escala-admin" class="w-full p-3 border rounded-lg"/>
                                <div class="grid grid-cols-2 gap-2">
                                    <input type="time" id="inicio-escala-admin" class="w-full p-3 border rounded-lg" placeholder="Entrada"/>
                                    <input type="time" id="fim-escala-admin" class="w-full p-3 border rounded-lg" placeholder="Saída"/>
                                </div>
                                <input type="text" id="observacoes-escala-admin" placeholder="Observações" class="w-full p-3 border rounded-lg"/>
                                <button onclick="definirEscalaUsuario()" class="bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition duration-200 w-full">
                                    <i class="fas fa-calendar-check mr-2"></i>Definir Escala
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Mural de Escalas -->
                    <div class="bg-white border rounded-lg p-4 mt-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="fas fa-clipboard-list mr-2 text-indigo-600"></i>
                            Mural de Escalas - Próximos 7 Dias
                        </h3>
                        <div id="mural-escalas" class="space-y-3">
                            <!-- Mural de escalas aparecerá aqui -->
                        </div>
                    </div>

                    <!-- Estatísticas e Relatórios -->
                    <div class="bg-white border rounded-lg p-4 mt-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="fas fa-chart-bar mr-2 text-orange-600"></i>
                            Relatórios de Agenda
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-blue-50 p-4 rounded-lg text-center">
                                <div class="text-2xl font-bold text-blue-600" id="total-tarefas-ativas">0</div>
                                <div class="text-sm text-blue-700">Tarefas Ativas</div>
                            </div>
                            <div class="bg-green-50 p-4 rounded-lg text-center">
                                <div class="text-2xl font-bold text-green-600" id="usuarios-trabalhando-hoje">0</div>
                                <div class="text-sm text-green-700">Usuários Trabalhando Hoje</div>
                            </div>
                            <div class="bg-red-50 p-4 rounded-lg text-center">
                                <div class="text-2xl font-bold text-red-600" id="tarefas-atrasadas">0</div>
                                <div class="text-sm text-red-700">Tarefas Atrasadas</div>
                            </div>
                        </div>
                        <button onclick="gerarRelatorioAgenda()" class="mt-4 bg-orange-600 text-white px-6 py-3 rounded-lg hover:bg-orange-700 transition duration-200">
                            <i class="fas fa-file-export mr-2"></i>Gerar Relatório Completo
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-2 py-1 shadow-lg z-30">
            <div class="flex justify-around items-center max-w-md mx-auto">
                <button onclick="abrirAbaInferior(&#39;ferramentas&#39;)" class="flex flex-col items-center p-2 text-gray-600 hover:text-blue-600 transition duration-200" data-permissao="ferramentas">
                    <i class="fas fa-tools text-lg"></i>
                    <span class="text-xs mt-1">Ferramentas</span>
                </button>
                <button onclick="abrirAbaInferior(&#39;banco-dados&#39;)" class="flex flex-col items-center p-2 text-gray-600 hover:text-blue-600 transition duration-200" data-permissao="banco_dados">
                    <i class="fas fa-database text-lg"></i>
                    <span class="text-xs mt-1">Banco</span>
                </button>
                <button onclick="abrirAbaInferior(&#39;downloads&#39;)" class="flex flex-col items-center p-2 text-gray-600 hover:text-blue-600 transition duration-200" data-permissao="downloads">
                    <i class="fas fa-download text-lg"></i>
                    <span class="text-xs mt-1">Downloads</span>
                </button>
                <button onclick="abrirAbaInferior(&#39;sites&#39;)" class="flex flex-col items-center p-2 text-gray-600 hover:text-blue-600 transition duration-200" data-permissao="sites">
                    <i class="fas fa-globe text-lg"></i>
                    <span class="text-xs mt-1">Sites</span>
                </button>
                <button onclick="abrirAbaInferior(&#39;conhecimento&#39;)" class="flex flex-col items-center p-2 text-gray-600 hover:text-blue-600 transition duration-200" data-permissao="conhecimento">
                    <i class="fas fa-book text-lg"></i>
                    <span class="text-xs mt-1">Conhecimento</span>
                </button>
                <button onclick="abrirAbaInferior(&#39;atendimentos-registros&#39;)" class="flex flex-col items-center p-2 text-gray-600 hover:text-blue-600 transition duration-200" data-permissao="atendimentos_registros">
                    <i class="fas fa-clipboard-list text-lg"></i>
                    <span class="text-xs mt-1">Atendimentos</span>
                </button>
                <button onclick="alternarMenuConsulta()" class="flex flex-col items-center p-2 text-gray-600 hover:text-blue-600 transition duration-200" data-permissao="banco_dados">
                    <i class="fas fa-play text-lg"></i>
                    <span class="text-xs mt-1">SQL</span>
                </button>
            </div>
        </nav>

        <!-- Floating Query Menu -->
        <div id="menu-consulta" class="menu-flutuante" style="display: none;">
            <div class="item-menu">
                <button onclick="abrirExecutorConsulta(&#39;sql&#39;)" class="bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700 transition duration-200" title="SQL Server">
                    <i class="fas fa-database"></i>
                </button>
            </div>
            <div class="item-menu">
                <button onclick="abrirExecutorConsulta(&#39;postgres&#39;)" class="bg-green-600 text-white p-3 rounded-full shadow-lg hover:bg-green-700 transition duration-200" title="PostgreSQL">
                    <i class="fab fa-envira"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Database Connection Modal -->
    <div id="modal-bd" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl shadow-2xl p-6 w-full max-w-md max-h-screen overflow-y-auto">
                <h3 class="text-xl font-semibold mb-6 text-center">Conectar ao Banco de Dados</h3>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Tipo do Banco</label>
                        <select id="tipo-bd" class="w-full p-3 border rounded-lg">
                            <option value="sql">SQL Server</option>
                            <option value="postgres">PostgreSQL</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Host</label>
                        <input type="text" id="host-bd" placeholder="localhost" class="w-full p-3 border rounded-lg"/>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Porta</label>
                        <input type="text" id="porta-bd" placeholder="1433 para SQL, 5432 para PostgreSQL" class="w-full p-3 border rounded-lg"/>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Nome do Banco</label>
                        <input type="text" id="nome-bd-input" placeholder="Nome do banco" class="w-full p-3 border rounded-lg"/>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Usuário</label>
                        <input type="text" id="usuario-bd" placeholder="Usuário do banco" class="w-full p-3 border rounded-lg"/>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Senha</label>
                        <input type="password" id="senha-bd-input" placeholder="Senha do banco" class="w-full p-3 border rounded-lg"/>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="salvar-conexao" class="mr-2 rounded"/>
                        <label for="salvar-conexao" class="text-sm text-gray-700">Salvar conexão</label>
                    </div>
                </div>
                <div class="flex flex-col sm:flex-row gap-2 mt-6">
                    <button onclick="conectarBancoDados()" class="flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition duration-200">
                        <span class="texto-botao-conexao">Conectar</span>
                    </button>
                    <button onclick="testarConexao()" class="bg-orange-600 text-white px-4 py-3 rounded-lg hover:bg-orange-700 transition duration-200">
                        Testar
                    </button>
                    <button onclick="fecharModal(&#39;modal-bd&#39;)" class="flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 transition duration-200">
                        Cancelar
                    </button>
                </div>
                <div id="resultado-teste-conexao" class="mt-4 hidden"></div>
            </div>
        </div>
    </div>

    <!-- Query Executor Modal -->
    <div id="modal-executor-consulta" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl shadow-2xl p-6 w-full max-w-6xl max-h-screen overflow-y-auto">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-semibold">Executor de Consultas SQL</h3>
                    <div class="flex items-center gap-4">
                        <div class="text-sm">
                            <span class="status-conexao" id="indicador-conexao-executor"></span>
                            <span id="texto-conexao-executor">Desconectado</span>
                        </div>
                        <button onclick="reconectarBancoDados()" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition duration-200">
                            Reconectar
                        </button>
                    </div>
                </div>
                
                <div class="mb-4">
                    <div class="flex flex-col lg:flex-row gap-2 mb-2">
                        <select id="select-consulta-salva" class="flex-1 p-3 border rounded-lg">
                            <option value="">Selecionar consulta salva...</option>
                        </select>
                        <button onclick="carregarConsultaSalva()" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition duration-200">
                            Carregar
                        </button>
                    </div>
                    <textarea id="executar-consulta" placeholder="Digite sua consulta SQL aqui..." class="w-full h-40 p-3 border rounded-lg font-mono text-sm"></textarea>
                    <div class="flex flex-wrap gap-2 items-center mt-2">
                        <button onclick="executarConsulta()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200" id="botao-executar">
                            <i class="fas fa-play mr-2"></i>Executar
                        </button>
                        <button onclick="formatarConsultaSQL()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition duration-200">
                            <i class="fas fa-code mr-2"></i>Formatar
                        </button>
                        <button onclick="limparConsulta()" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition duration-200">
                            <i class="fas fa-trash mr-2"></i>Limpar
                        </button>
                        <span class="text-sm text-gray-600" id="estatisticas-consulta"></span>
                    </div>
                </div>
                
                <div class="flex flex-wrap gap-2 mb-4">
                    <button onclick="fecharModal(&#39;modal-executor-consulta&#39;)" class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition duration-200">
                        Fechar
                    </button>
                    <button onclick="exportarResultados()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition duration-200" id="botao-exportar" style="display: none;">
                        <i class="fas fa-download mr-2"></i>Exportar CSV
                    </button>
                </div>
                
                <div id="resultados-consulta" class="border rounded-lg bg-gray-50 min-h-32 max-h-96 overflow-auto">
                    <div class="p-4 text-gray-500 text-center">
                        <i class="fas fa-database mr-2"></i>Os resultados da consulta aparecerão aqui...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Downloads Modal -->
    <div id="modal-downloads" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl shadow-2xl p-6 w-full max-w-md max-h-screen overflow-y-auto">
                <h3 class="text-xl font-semibold mb-6 text-center">Gerenciar Downloads</h3>
                <div class="space-y-4 mb-6">
                    <input type="text" id="nome-download" placeholder="Nome do arquivo" class="w-full p-3 border rounded-lg"/>
                    <input type="url" id="url-download" placeholder="URL do arquivo" class="w-full p-3 border rounded-lg"/>
                    <input type="file" id="arquivo-upload" class="w-full p-3 border rounded-lg" multiple=""/>
                    <button onclick="adicionarDownload()" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition duration-200">
                        <i class="fas fa-plus mr-2"></i>Adicionar Download
                    </button>
                </div>
                <div id="lista-downloads" class="space-y-2 max-h-64 overflow-y-auto mb-4">
                    <!-- Lista de downloads aparecerá aqui -->
                </div>
                <div class="flex gap-2">
                    <button onclick="limparTodosDownloads()" class="flex-1 bg-red-600 text-white py-3 rounded-lg hover:bg-red-700 transition duration-200">
                        Limpar Tudo
                    </button>
                    <button onclick="fecharModal(&#39;modal-downloads&#39;)" class="flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 transition duration-200">
                        Fechar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Sites Úteis Modal -->
    <div id="modal-sites" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl shadow-2xl p-6 w-full max-w-md max-h-screen overflow-y-auto">
                <h3 class="text-xl font-semibold mb-6 text-center">Sites Úteis</h3>
                <div class="space-y-4 mb-6 apenas-admin" id="controles-admin-sites">
                    <input type="text" id="nome-site" placeholder="Nome do site" class="w-full p-3 border rounded-lg"/>
                    <input type="url" id="url-site" placeholder="URL do site" class="w-full p-3 border rounded-lg"/>
                    <button onclick="adicionarSite()" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition duration-200">
                        <i class="fas fa-plus mr-2"></i>Adicionar Site
                    </button>
                </div>
                <div id="lista-sites" class="space-y-2 max-h-64 overflow-y-auto mb-4">
                    <!-- Lista de sites aparecerá aqui -->
                </div>
                <div class="flex flex-wrap gap-2">
                    <button onclick="importarSites()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition duration-200 apenas-admin" id="botao-importar-sites">
                        <i class="fas fa-upload mr-2"></i>Importar
                    </button>
                    <button onclick="exportarSites()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition duration-200">
                        <i class="fas fa-download mr-2"></i>Exportar
                    </button>
                    <button onclick="fecharModal(&#39;modal-sites&#39;)" class="flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 transition duration-200">
                        Fechar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Base de Conhecimento Modal -->
    <div id="modal-conhecimento" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl shadow-2xl p-6 w-full max-w-6xl max-h-screen overflow-y-auto">
                <h3 class="text-xl font-semibold mb-6 text-center">Base de Conhecimento</h3>
                
                <!-- Barra de Busca -->
                <div class="mb-6">
                    <div class="relative busca-conhecimento">
                        <input type="text" id="busca-conhecimento" placeholder="Pesquisar na base de conhecimento..." class="w-full p-3 border rounded-lg pr-10" oninput="pesquisarConhecimento()"/>
                        <i class="fas fa-search absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                        <div id="resultados-busca" class="resultado-busca hidden"></div>
                    </div>
                </div>

                <!-- Controles Admin -->
                <div class="bg-gray-50 p-4 rounded-lg mb-6 apenas-admin">
                    <h3 class="text-lg font-semibold mb-4">Criar Novo Conteúdo</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <input type="text" id="titulo-conhecimento" placeholder="Título do manual/procedimento" class="p-3 border rounded-lg"/>
                        <select id="categoria-conhecimento" class="p-3 border rounded-lg">
                            <option value="manual">Manual</option>
                            <option value="procedimento">Procedimento</option>
                            <option value="tutorial">Tutorial</option>
                            <option value="faq">FAQ</option>
                        </select>
                    </div>
                    <textarea id="conteudo-conhecimento" placeholder="Conteúdo do documento..." class="w-full h-32 p-3 border rounded-lg mb-4"></textarea>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Anexar Arquivos (Imagens, Vídeos, PDFs)</label>
                        <input type="file" id="arquivos-conhecimento" multiple="" accept="image/*,video/*,.pdf,.doc,.docx" class="w-full p-2 border rounded-lg"/>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Palavras-chave (separadas por vírgula)</label>
                        <input type="text" id="palavras-chave" placeholder="palavra1, palavra2, palavra3" class="w-full p-3 border rounded-lg"/>
                    </div>
                    <button onclick="criarConteudoConhecimento()" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition duration-200">
                        <i class="fas fa-plus mr-2"></i>Criar Documento
                    </button>
                </div>

                <!-- Lista de Conteúdos -->
                <div id="lista-conhecimento" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
                    <!-- Conteúdos da base de conhecimento aparecerão aqui -->
                </div>
                
                <button onclick="fecharModal(&#39;modal-conhecimento&#39;)" class="bg-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-400 transition duration-200">
                    Fechar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Visualização de Conteúdo -->
    <div id="modal-visualizar-conhecimento" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl shadow-2xl p-6 w-full max-w-4xl max-h-screen overflow-y-auto">
                <div class="flex justify-between items-center mb-4">
                    <h3 id="titulo-conteudo-modal" class="text-xl font-semibold">Título do Conteúdo</h3>
                    <button onclick="fecharModal(&#39;modal-visualizar-conhecimento&#39;)" class="text-gray-600 hover:text-gray-800">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <div id="conteudo-modal" class="prose max-w-none">
                    <!-- Conteúdo será carregado aqui -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Atendimentos/Registros -->
    <div id="modal-atendimentos-registros" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl shadow-2xl p-6 w-full max-w-7xl max-h-screen overflow-y-auto">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-semibold">Sistema de Atendimentos</h3>
                    <button onclick="fecharModal(&#39;modal-atendimentos-registros&#39;)" class="text-gray-600 hover:text-gray-800">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>

                <!-- Tabs Atendimentos -->
                <div class="mb-6">
                    <div class="border-b border-gray-200">
                        <nav class="-mb-px flex space-x-8">
                            <button onclick="abrirAbaAtendimento(&#39;cadastro-clientes&#39;)" class="tab-atendimento py-2 px-1 border-b-2 font-medium text-sm border-blue-500 text-blue-600" data-tab="cadastro-clientes">
                                <i class="fas fa-user-plus mr-2"></i>Cadastro de Clientes
                            </button>
                            <button onclick="abrirAbaAtendimento(&#39;novo-atendimento&#39;)" class="tab-atendimento py-2 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700" data-tab="novo-atendimento">
                                <i class="fas fa-plus-circle mr-2"></i>Novo Atendimento
                            </button>
                            <button onclick="abrirAbaAtendimento(&#39;pesquisar-atendimentos&#39;)" class="tab-atendimento py-2 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700" data-tab="pesquisar-atendimentos">
                                <i class="fas fa-search mr-2"></i>Pesquisar Atendimentos
                            </button>
                        </nav>
                    </div>
                </div>

                <!-- Conteúdo das Abas -->
                <!-- Aba Cadastro de Clientes -->
                <div id="tab-cadastro-clientes" class="tab-content-atendimento">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Formulário de Cadastro -->
                        <div class="bg-gray-50 p-6 rounded-lg">
                            <h4 class="text-lg font-semibold mb-4">Cadastrar Novo Cliente</h4>
                            <form id="form-cadastro-cliente" class="space-y-4">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">CNPJ *</label>
                                        <input type="text" id="cnpj-cliente-cadastro" placeholder="00.000.000/0000-00" class="w-full p-3 border rounded-lg mascara-cnpj" maxlength="18" required=""/>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Razão Social *</label>
                                        <input type="text" id="razao-social-cliente" placeholder="Razão social da empresa" class="w-full p-3 border rounded-lg" required=""/>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Nome Fantasia</label>
                                        <input type="text" id="nome-fantasia-cliente" placeholder="Nome fantasia" class="w-full p-3 border rounded-lg"/>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Telefone</label>
                                        <input type="text" id="telefone-cliente" placeholder="(00) 00000-0000" class="w-full p-3 border rounded-lg"/>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                        <input type="email" id="email-cliente" placeholder="email@exemplo.com" class="w-full p-3 border rounded-lg"/>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Responsável</label>
                                        <input type="text" id="responsavel-cliente" placeholder="Nome do responsável" class="w-full p-3 border rounded-lg"/>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Endereço</label>
                                    <textarea id="endereco-cliente" placeholder="Endereço completo..." class="w-full h-20 p-3 border rounded-lg"></textarea>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Observações</label>
                                    <textarea id="observacoes-cliente" placeholder="Observações sobre o cliente..." class="w-full h-20 p-3 border rounded-lg"></textarea>
                                </div>
                                
                                <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition duration-200">
                                    <i class="fas fa-save mr-2"></i>Cadastrar Cliente
                                </button>
                            </form>
                        </div>

                        <!-- Lista de Clientes -->
                        <div>
                            <div class="flex justify-between items-center mb-4">
                                <h4 class="text-lg font-semibold">Clientes Cadastrados</h4>
                                <div class="relative">
                                    <input type="text" id="busca-clientes" placeholder="Buscar clientes..." class="pl-10 pr-4 py-2 border rounded-lg" oninput="buscarClientes()"/>
                                    <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                </div>
                            </div>
                            <div id="lista-clientes" class="space-y-3 max-h-96 overflow-y-auto">
                                <!-- Lista de clientes aparecerá aqui -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Aba Novo Atendimento -->
                <div id="tab-novo-atendimento" class="tab-content-atendimento hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Formulário de Atendimento -->
                        <div class="bg-gray-50 p-6 rounded-lg">
                            <h4 class="text-lg font-semibold mb-4">Registrar Novo Atendimento</h4>
                            <form id="form-novo-atendimento" class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">CNPJ do Cliente *</label>
                                    <div class="relative">
                                        <input type="text" id="cnpj-atendimento" placeholder="00.000.000/0000-00" class="w-full p-3 border rounded-lg mascara-cnpj pr-10" maxlength="18" required=""/>
                                        <button type="button" onclick="buscarClientePorCNPJ()" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-blue-600 hover:text-blue-800">
                                            <i class="fas fa-search"></i>
                                        </button>
                                    </div>
                                    <div id="info-cliente-encontrado" class="mt-2 p-3 bg-green-50 border border-green-200 rounded-lg hidden">
                                        <!-- Informações do cliente aparecerão aqui -->
                                    </div>
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Tipo de Atendimento *</label>
                                        <select id="tipo-atendimento" class="w-full p-3 border rounded-lg" required="">
                                            <option value="">Selecionar tipo...</option>
                                            <option value="ligacao">Ligação</option>
                                            <option value="whatsapp">WhatsApp</option>
                                            <option value="email">E-mail</option>
                                            <option value="presencial">Presencial</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Protocolo</label>
                                        <input type="text" id="protocolo-atendimento" placeholder="Protocolo do atendimento" class="w-full p-3 border rounded-lg"/>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Assunto *</label>
                                    <input type="text" id="assunto-atendimento" placeholder="Assunto do atendimento" class="w-full p-3 border rounded-lg" required=""/>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Tratativa *</label>
                                    <textarea id="tratativa-atendimento" placeholder="Descreva a tratativa realizada..." class="w-full h-32 p-3 border rounded-lg" required=""></textarea>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Anexos</label>
                                    <input type="file" id="anexos-atendimento" multiple="" class="w-full p-2 border rounded-lg"/>
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                                        <select id="status-atendimento" class="w-full p-3 border rounded-lg">
                                            <option value="pendente">Pendente</option>
                                            <option value="em-andamento">Em Andamento</option>
                                            <option value="concluido">Concluído</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Prioridade</label>
                                        <select id="prioridade-atendimento" class="w-full p-3 border rounded-lg">
                                            <option value="baixa">Baixa</option>
                                            <option value="media" selected="">Média</option>
                                            <option value="alta">Alta</option>
                                            <option value="urgente">Urgente</option>
                                        </select>
                                    </div>
                                </div>

                                <button type="submit" class="w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition duration-200">
                                    <i class="fas fa-save mr-2"></i>Registrar Atendimento
                                </button>
                            </form>
                        </div>

                        <!-- Últimos Atendimentos -->
                        <div>
                            <h4 class="text-lg font-semibold mb-4">Últimos Atendimentos</h4>
                            <div id="ultimos-atendimentos" class="space-y-3 max-h-96 overflow-y-auto">
                                <!-- Últimos atendimentos aparecerão aqui -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Aba Pesquisar Atendimentos -->
                <div id="tab-pesquisar-atendimentos" class="tab-content-atendimento hidden">
                    <!-- Filtros de Pesquisa -->
                    <div class="bg-gray-50 p-6 rounded-lg mb-6">
                        <h4 class="text-lg font-semibold mb-4">Filtros de Pesquisa</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 filtros-pesquisa">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Data Início</label>
                                <input type="date" id="filtro-data-inicio" class="w-full p-3 border rounded-lg"/>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Data Fim</label>
                                <input type="date" id="filtro-data-fim" class="w-full p-3 border rounded-lg"/>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">CNPJ</label>
                                <input type="text" id="filtro-cnpj" placeholder="00.000.000/0000-00" class="w-full p-3 border rounded-lg mascara-cnpj" maxlength="18"/>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Protocolo</label>
                                <input type="text" id="filtro-protocolo" placeholder="Protocolo" class="w-full p-3 border rounded-lg"/>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Tipo</label>
                                <select id="filtro-tipo" class="w-full p-3 border rounded-lg">
                                    <option value="">Todos os tipos</option>
                                    <option value="ligacao">Ligação</option>
                                    <option value="whatsapp">WhatsApp</option>
                                    <option value="email">E-mail</option>
                                    <option value="presencial">Presencial</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                                <select id="filtro-status" class="w-full p-3 border rounded-lg">
                                    <option value="">Todos os status</option>
                                    <option value="pendente">Pendente</option>
                                    <option value="em-andamento">Em Andamento</option>
                                    <option value="concluido">Concluído</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Atendente</label>
                                <select id="filtro-atendente" class="w-full p-3 border rounded-lg">
                                    <option value="">Todos os atendentes</option>
                                    <!-- Será populado dinamicamente -->
                                </select>
                            </div>
                            <div class="flex items-end">
                                <button onclick="pesquisarAtendimentos()" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition duration-200">
                                    <i class="fas fa-search mr-2"></i>Pesquisar
                                </button>
                            </div>
                        </div>
                        
                        <div class="flex gap-2 mt-4">
                            <button onclick="limparFiltros()" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition duration-200">
                                <i class="fas fa-eraser mr-2"></i>Limpar Filtros
                            </button>
                            <button onclick="exportarAtendimentos()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition duration-200">
                                <i class="fas fa-file-export mr-2"></i>Exportar CSV
                            </button>
                        </div>
                    </div>

                    <!-- Resultados da Pesquisa -->
                    <div>
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="text-lg font-semibold">Resultados da Pesquisa</h4>
                            <span id="contador-resultados" class="text-sm text-gray-600">0 atendimentos encontrados</span>
                        </div>
                        <div id="resultados-pesquisa-atendimentos" class="space-y-3 max-h-96 overflow-y-auto">
                            <div class="text-center text-gray-500 py-8">
                                <i class="fas fa-search text-4xl mb-2"></i>
                                <p>Use os filtros acima para pesquisar atendimentos</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Detalhes do Atendimento -->
    <div id="modal-detalhes-atendimento" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl shadow-2xl p-6 w-full max-w-4xl max-h-screen overflow-y-auto">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-semibold">Detalhes do Atendimento</h3>
                    <button onclick="fecharModal(&#39;modal-detalhes-atendimento&#39;)" class="text-gray-600 hover:text-gray-800">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <div id="conteudo-detalhes-atendimento">
                    <!-- Detalhes do atendimento serão carregados aqui -->
                </div>
            </div>
        </div>
    </div>

    <!-- Banner de Instalação PWA -->
    <div id="banner-instalacao" class="banner-instalacao">
        <div class="flex items-center justify-between">
            <div class="flex items-center">
                <i class="fas fa-mobile-alt text-2xl mr-3"></i>
                <div>
                    <div class="font-semibold">Instalar Aplicativo</div>
                    <div class="text-sm opacity-90">Adicione à tela inicial para acesso rápido</div>
                </div>
            </div>
            <div class="flex gap-2">
                <button onclick="instalarPWA()" class="bg-white text-blue-600 px-4 py-2 rounded font-medium hover:bg-blue-50 transition duration-200">
                    Instalar
                </button>
                <button onclick="dispensarBannerInstalacao()" class="text-white hover:text-blue-200 p-2">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="overlay-carregamento" class="overlay-carregamento hidden">
        <div class="bg-white p-6 rounded-xl shadow-2xl text-center">
            <div class="carregador-spinning mx-auto mb-4"></div>
            <div class="text-lg font-semibold text-gray-800" id="texto-carregamento">Carregando...</div>
        </div>
    </div>

    
    
    

    <script src="script.js"></script>
</body></html>